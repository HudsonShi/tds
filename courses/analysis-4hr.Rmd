---
title: "4 hour workshop: R for Transport Data Analysis"
output: github_document
bibliography:
  - ../tds.bib
  - ../software.bib
---

Transport Data Science course, based on materials hosted at https://github.com/ITSLeeds/TDS

Assumed prior knowledge:

- Working knowledge of R, e.g. have completed: 
  - Introduction to R free DataCamp course: https://www.datacamp.com/courses/free-introduction-to-r
  - Recommended reading: Section 4.2 of *Efficient R Programming* [@gillespie_efficient_2016]: https://csgillespie.github.io/efficientR/efficient-workflow.html#package-selection

- Some knowledge of tidyverse is highly recommended, e.g. already know the contents of or have read-up on **and tried examples from** the following 'cheatsheets':
  - Tidyverse for Beginners DataCamp Cheat Sheet (see [here](https://s3.amazonaws.com/assets.datacamp.com/blog_assets/Tidyverse+Cheat+Sheet.pdf)). **At a minimum you will have completed up to Chapter 5 on this online course** (this may take ~2 hours)
  - Data wrangling with dplyr and tidyr RStudio cheet cheet (see [here](https://www.rstudio.com/wp-content/uploads/2015/02/data-wrangling-cheatsheet.pdf))
  
<!-- **It's in the Analysis directorate** -->

## Computing Requirements

- DfT will provide desktops with recent versions of R and RStudio installed, including:
  - R 3.6.0 or later recommended (although any R 3.5 release should work): **download and install the latest version from** https://cran.r-project.org/
  - A recent version of RStudio: **download and install the latest version from** https://www.rstudio.com/products/rstudio/download/
  - Up-to-date versions of **tidyverse** and **sf** packages, at a minimum
  - Other packages we'll use are shown in the code below, which installs them
  
The packages used can be installed as follows:

```{r, eval=FALSE}
install.packages("remotes")
pkgs = c(
  "osmdata",
  "pct",
  "sf",
  "stats19",
  "stplanr",
  "tidyverse",
  "tmap"
)
remotes::install_cran(pkgs)
```

- Own laptops should be used, unless the necessary packages work on the cluster

- Data: all data will be either provided by packages or downloaded on the day (assuming good internet)
  - A test to check if data downloads work is accessing stats19 data (check this works):

```{r, eval=FALSE}
crashes = stats19::get_stats19(year = 2017, type = "accidents", ask = FALSE)
```

- To test you can download data from OSM, try the following code:

```{r}
# set-up
library(osmdata)
library(tmap)
ttm()

# get data
d = opq("madrid") %>% 
  add_osm_feature("highway", "cycleway") %>% 
  osmdata_sf()

# plot data
tm_shape(d$osm_lines) + 
  tm_lines(col = "blue", lwd = 5) +
  tm_view(basemaps = leaflet::providers$OpenStreetMap.BlackAndWhite)
```


## Venue and course times

The course will take place from 10:00 to 14:00 at [Edificio Multiusos Ciudad Universitaria](https://www.google.com/maps/place/Edificio+Multiusos/@40.4500279,-3.7331934,15z/data=!4m5!3m4!1s0x0:0x721fc321c370faad!8m2!3d40.4500279!4d-3.7331934), 28040 Madrid

See https://forms.gle/m5zraC8QQH5AydgT8

<!-- - Download data from open roads: put on test scripts -->
  
## Required reading

The course will build on Chapter 12 of *Geocomputation with R* [@lovelace_geocomputation_2019]: http://geocompr.robinlovelace.net/transport.html

## Optional extra reading

- Optional extra reading: for context, you may want to read-up on:
  - Overview of GIS in R, e.g. in Chapter 1 of *Geocomputation with R* or this blog post: https://www.jessesadler.com/post/gis-with-r-intro/
  - stplanr: A package for transport planning [@lovelace_stplanr:_2018]
  - R for data science [@grolemund_r_2016]

### Agenda

- 10:00 - 11:00: Getting and analysing spatio-temporal transport: examples with `stats19`, `pct` and `osmdata` packages

- 11:00 - 12:00: Origin-destination (OD) data analysis with `stplanr`

12:00 - 12:30: Break

- 12:30 - 13:00: From routes to route networks

- 13:00 - 14:00: Data and methods for assessing cycling potential

  
## References




